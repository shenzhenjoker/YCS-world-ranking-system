
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>世界大师杯排名系统</title>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600&display=swap" rel="stylesheet">
  <script src="./assets/flag-map.js"></script>
  <style>
    body { background: black; color: white; font-family: Orbitron, sans-serif; }
    .flag { height: 16px; margin-right: 6px; vertical-align: middle; }
    header { text-align: center; font-size: 1.8rem; margin: 2rem auto; text-shadow: 0 0 10px cyan; }
    table { width: 80%; margin: auto; border-collapse: collapse; border-radius: 12px; overflow: hidden; }
    th, td { padding: 1rem; text-align: center; }
    tr.gold { background: #FFD70033; }
    tr.silver { background: #C0C0C033; }
    tr.bronze { background: #CD7F3233; }
    tr:hover { background-color: #333; }
  </style>
</head>
<body>
  <header id="page-title">加载中...</header>
  <table>
    <thead>
      <tr><th>名次</th><th>国家</th><th>选手</th><th>成绩</th></tr>
    </thead>
    <tbody id="rankingTable"></tbody>
  </table>
  <script>
    fetch("title.json").then(res => res.json()).then(t => {
      document.getElementById("page-title").innerText = t.zh;
    });

    function getFlagUrl(countryName) {
      const code = countryMap[countryName.trim()];
      return code ? `https://flagcdn.com/h20/${code}.png` : "";
    }

    fetch("result.json").then(res => res.json()).then(data => {
      const tbody = document.getElementById("rankingTable");
      data.forEach((row, i) => {
        const tr = document.createElement("tr");
        if (i === 0) tr.classList.add("gold");
        else if (i === 1) tr.classList.add("silver");
        else if (i === 2) tr.classList.add("bronze");

        const flag = getFlagUrl(row.nationality);
        const flagImg = flag ? `<img class='flag' src='${flag}' />` : "";
        tr.innerHTML = `
          <td>${i + 1}</td>
          <td>${flagImg + row.nationality}</td>
          <td>${row.name}</td>
          <td>${row.result}</td>`;
        tbody.appendChild(tr);
      });
    });
  </script>
</body>
</html>
