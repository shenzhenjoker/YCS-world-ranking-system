
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <title>世界大师杯</title>
  <style>
    body { background: #000; color: #fff; font-family: sans-serif; }
    table { width: 80%; margin: 2rem auto; border-collapse: collapse; background: #111; }
    th, td { border: 1px solid #333; padding: 0.75rem; text-align: center; }
    .flag { height: 14px; margin-right: 6px; vertical-align: middle; }
    header { text-align: center; margin-top: 2rem; font-size: 1.5rem; }
  </style>
  <script>
    const countryMap = {
      "中国": "cn", "China": "cn", "中华人民共和国": "cn",
      "美国": "us", "USA": "us", "United States": "us",
      "英国": "gb", "UK": "gb",
      "法国": "fr", "France": "fr"
    };
    const titleMap = {
      zh: "世界大师杯 · 北京站",
      en: "World Championship · Beijing"
    };
  </script>
</head>
<body>
  <header id="page-title">加载中...</header>
  <table>
    <thead>
      <tr><th>名次</th><th>国家</th><th>选手</th><th>成绩</th></tr>
    </thead>
    <tbody id="rankingTable"></tbody>
  </table>

  <script>
    let currentLang = "zh";
    document.getElementById("page-title").innerText = titleMap[currentLang];

    function getFlagUrl(countryName) {
      const code = countryMap[countryName.trim()];
      return code ? "https://flagcdn.com/h20/" + code + ".png" : "";
    }

    fetch("result.json").then(res => res.json()).then(data => {
      const tbody = document.getElementById("rankingTable");
      data.forEach((row, i) => {
        const tr = document.createElement("tr");
        const flag = getFlagUrl(row.nationality);
        const flagImg = flag ? "<img class='flag' src='" + flag + "' />" : "";
        tr.innerHTML = `
          <td>${i + 1}</td>
          <td>${flagImg + row.nationality}</td>
          <td>${row.name}</td>
          <td>${row.result}</td>`;
        tbody.appendChild(tr);
      });
    });
  </script>
</body>
</html>
