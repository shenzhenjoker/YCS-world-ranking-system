
<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>世界大师杯排名系统</title>
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(180deg, #000000 0%, #0a0a0a 100%);
      color: #f2f2f2;
      overflow-x: hidden;
    }
    header {
      background-color: rgba(0,0,0,0.7);
      padding: 10px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    header img.logo {
      height: 60px;
    }
    .title-box {
      flex-grow: 1;
      text-align: center;
      font-size: 24px;
      font-weight: bold;
    }
    .lang-box {
      font-size: 14px;
    }
    .event-select {
      margin: 20px auto;
      text-align: center;
    }
    select {
      padding: 6px 10px;
      font-size: 16px;
    }
    table {
      width: 90%;
      margin: 10px auto;
      border-collapse: collapse;
      background-color: rgba(255, 255, 255, 0.05);
      border-radius: 8px;
      overflow: hidden;
    }
    th, td {
      padding: 12px;
      text-align: center;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }
    th {
      background-color: rgba(255,255,255,0.1);
      font-size: 16px;
    }
    tr {
      transition: background 0.3s ease;
    }
    tr:hover {
      background-color: rgba(255,255,255,0.08);
    }
    .rank-icon {
      font-size: 20px;
    }
    .refresh-note {
      text-align: center;
      margin: 10px;
      font-size: 14px;
      color: #aaa;
    }
  </style>
</head>
<body>
  <header>
    <img src="./assets/logo.png" class="logo" alt="Logo"/>
    <div class="title-box" id="page-title">世界大师杯 · Tokyo 2025</div>
    <div class="lang-box">
      <button onclick="switchLang('en')">EN</button> | <button onclick="switchLang('zh')">中</button>
    </div>
  </header>

  <div class="event-select">
    <label id="label-event">选择赛事：</label>
    <select id="eventSelect" onchange="switchEvent()">
      <option value="tokyo">东京站</option>
      <option value="shanghai">上海站</option>
    </select>
  </div>

  <table id="rankingTable">
    <thead>
      <tr>
        <th id="th-rank">名次</th>
        <th id="th-country">国家</th>
        <th id="th-name">选手</th>
        <th id="th-result">成绩</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <div class="refresh-note" id="refreshText">自动每 10 秒刷新一次</div>

  <script>
    let currentLang = "zh";
    let currentEvent = "tokyo";
    const langPack = {
      zh: {
        title: "世界大师杯 · ",
        label_event: "选择赛事：",
        th_rank: "名次", th_country: "国家", th_name: "选手", th_result: "成绩",
        refresh: "自动每 10 秒刷新一次"
      },
      en: {
        title: "World Championship · ",
        label_event: "Select Event:",
        th_rank: "Rank", th_country: "Country", th_name: "Athlete", th_result: "Result",
        refresh: "Auto refresh every 10 seconds"
      }
    };

    function switchLang(lang) {
      currentLang = lang;
      const t = langPack[lang];
      document.getElementById("page-title").innerText = t.title + currentEvent;
      document.getElementById("label-event").innerText = t.label_event;
      document.getElementById("th-rank").innerText = t.th_rank;
      document.getElementById("th-country").innerText = t.th_country;
      document.getElementById("th-name").innerText = t.th_name;
      document.getElementById("th-result").innerText = t.th_result;
      document.getElementById("refreshText").innerText = t.refresh;
    }

    function switchEvent() {
      currentEvent = document.getElementById("eventSelect").value;
      fetch("title.json").then(r => r.json()).then(t => { document.getElementById("page-title").innerText = t[currentLang]; });
      loadData();
    }

    function loadData() {
      fetch(`result.json`)
        .then(res => res.json())
        .then(data => {
          const tbody = document.querySelector("#rankingTable tbody");
          tbody.innerHTML = '';
          data.forEach((row, i) => {
            let icon = '';
            if (i === 0) icon = '🥇';
            else if (i === 1) icon = '🥈';
            else if (i === 2) icon = '🥉';
            else icon = i + 1;
            const tr = document.createElement("tr");
            tr.innerHTML = `
              <td class="rank-icon">${icon}</td>
              <td>${row.nationality}</td>
              <td>${row.name}</td>
              <td>${row.result}</td>
            `;
            tbody.appendChild(tr);
          });
        });
    }

    switchLang('zh');
    loadData();
    setInterval(loadData, 10000);
  </script>
</body>
</html>
